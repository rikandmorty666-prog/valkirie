# üöÄ –ü–æ–ª–Ω—ã–π –ø–ª–∞–Ω —Å–æ–∑–¥–∞–Ω–∏—è WebUI —Å TailAdmin - –û—Ç –Ω—É–ª—è –¥–æ –≥–æ—Ç–æ–≤–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## –í–µ—Ä—Å–∏—è: 1.0 | –î–∞—Ç–∞: –î–µ–∫–∞–±—Ä—å 2024

**–ü—Ä–æ–µ–∫—Ç:** Valkyrie TMS - –†–µ–¥–∞–∫—Ç–æ—Ä –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ —Å —Ç—Ä–µ—Ö–ø–∞–Ω–µ–ª—å–Ω—ã–º layout  
**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** TailAdmin + React + TypeScript + Vite + Tailwind CSS  
**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π WebUI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–π—Å–∞–º–∏ –∏ –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞–º–∏

---

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞](#1-–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-–∏-—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
2. [–°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ TailAdmin](#2-—Å–∫–∞—á–∏–≤–∞–Ω–∏–µ-–∏-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-tailadmin)
3. [–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π](#3-–ø—Ä–æ–≤–µ—Ä–∫–∞-–∏-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
4. [–°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞](#4-—Å–æ–∑–¥–∞–Ω–∏–µ-—Å—Ç—Ä—É–∫—Ç—É—Ä—ã-–ø—Ä–æ–µ–∫—Ç–∞)
5. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Tailwind CSS](#5-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-tailwind-css)
6. [–ë–∞–∑–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ Layout](#6-–±–∞–∑–æ–≤—ã–µ-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã-–∏-layout)
7. [–°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü](#7-—Å–æ–∑–¥–∞–Ω–∏–µ-—Å—Ç—Ä–∞–Ω–∏—Ü)
8. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç—ã (Leaflet)](#8-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-–∫–∞—Ä—Ç—ã-leaflet)
9. [–†–µ–¥–∞–∫—Ç–æ—Ä –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ (—Ç—Ä–µ—Ö–ø–∞–Ω–µ–ª—å–Ω—ã–π layout)](#9-—Ä–µ–¥–∞–∫—Ç–æ—Ä-–º–∞–Ω–∏—Ñ–µ—Å—Ç–∞-—Ç—Ä–µ—Ö–ø–∞–Ω–µ–ª—å–Ω—ã–π-layout)
10. [Drag & Drop –¥–ª—è —Å—Ç–æ–ø–æ–≤](#10-drag--drop-–¥–ª—è-—Å—Ç–æ–ø–æ–≤)
11. [–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∏ ETA](#11-–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è-–∏-eta)
12. [Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è](#12-real-time-–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)
13. [–§–∏–Ω–∞–ª—å–Ω–∞—è –ø–æ–ª–∏—Ä–æ–≤–∫–∞](#13-—Ñ–∏–Ω–∞–ª—å–Ω–∞—è-–ø–æ–ª–∏—Ä–æ–≤–∫–∞)

---

## 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### –®–∞–≥ 1.1: –ü—Ä–æ–≤–µ—Ä–∫–∞ Node.js

**–ù–∞ Mac (Terminal):**

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é Node.js
node --version
```

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- ‚úÖ Node.js –≤–µ—Ä—Å–∏—è **20.x –∏–ª–∏ –≤—ã—à–µ** (LTS —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- ‚úÖ npm –≤–µ—Ä—Å–∏—è **10.x –∏–ª–∏ –≤—ã—à–µ**

**–ï—Å–ª–∏ Node.js –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω:**

1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ https://nodejs.org/
2. –°–∫–∞—á–∞—Ç—å **LTS –≤–µ—Ä—Å–∏—é** (–Ω–∞–ø—Ä–∏–º–µ—Ä, 20.11.0)
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —á–µ—Ä–µ–∑ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Terminal
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–Ω–æ–≤–∞: `node --version`

**–ò–ª–∏ —á–µ—Ä–µ–∑ Homebrew (Mac):**
```bash
brew install node@20
```

### –®–∞–≥ 1.2: –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞
mkdir -p ~/Projects/ValkyrieTMS-WebUI
cd ~/Projects/ValkyrieTMS-WebUI
```

**–ò–ª–∏ –Ω–∞ —Ä–∞–±–æ—á–µ–º —Å—Ç–æ–ª–µ:**
```bash
mkdir -p ~/Desktop/ValkyrieTMS-WebUI
cd ~/Desktop/ValkyrieTMS-WebUI
```

---

## 2. –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ TailAdmin

### –®–∞–≥ 2.1: –°–∫–∞—á–∞—Ç—å TailAdmin React

1. **–û—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä**
2. **–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞:** https://tailadmin.com/download
3. **–í—ã–±—Ä–∞—Ç—å –≤–∫–ª–∞–¥–∫—É:** "React"
4. **–ù–∞–∂–∞—Ç—å:** "Free Download - React"
5. **–°–∫–∞—á–∞—Ç—å –∞—Ä—Ö–∏–≤** (–æ–±—ã—á–Ω–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `tailadmin-react-free.zip` –∏–ª–∏ –ø–æ–¥–æ–±–Ω–æ–µ)

### –®–∞–≥ 2.2: –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å –∞—Ä—Ö–∏–≤

```bash
# –ï—Å–ª–∏ –∞—Ä—Ö–∏–≤ –≤ Downloads
cd ~/Downloads
unzip tailadmin-react-free.zip

# –ò–ª–∏ —á–µ—Ä–µ–∑ Finder:
# 1. –î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –Ω–∞ –∞—Ä—Ö–∏–≤
# 2. –î–æ–∂–¥–∞—Ç—å—Å—è —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏
```

**–ü–æ—Å–ª–µ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏:**
- –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –ø–∞–ø–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `tailadmin-react-free` –∏–ª–∏ `tailadmin-react`)
- –ó–∞–ø–æ–º–Ω–∏—Ç—å –ø—É—Ç—å –∫ —ç—Ç–æ–π –ø–∞–ø–∫–µ

### –®–∞–≥ 2.3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É TailAdmin

```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω–Ω—É—é –ø–∞–ø–∫—É
cd ~/Downloads/tailadmin-react-free  # –∏–ª–∏ –∫–∞–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤–∞—à–∞ –ø–∞–ø–∫–∞

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É
ls -la

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–∞–ø–∫–∏:
# - src/
# - public/
# - package.json
# - tailwind.config.js
# - vite.config.ts
```

---

## 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### –®–∞–≥ 3.1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏–∏ –≤ TailAdmin

**–û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª:** `package.json` –∏–∑ TailAdmin

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏–∏:**
- `react` - –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å `^18.3.1` –∏–ª–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–∞—è
- `vite` - –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å `^5.4.0` –∏–ª–∏ –Ω–∏–∂–µ (–Ω–µ 7!)
- `tailwindcss` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é

**–í–∞–∂–Ω–æ:** –ï—Å–ª–∏ TailAdmin –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é, –æ–±–Ω–æ–≤–∏–º –¥–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã—Ö.

### –®–∞–≥ 3.2: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç Vite

**–í –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞:**

```bash
# –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd ~/Projects/ValkyrieTMS-WebUI

# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç —Å Vite
npm create vite@latest webui -- --template react-ts

# –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É
cd webui

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∞–∑–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –ø–∞–ø–∫–∞ `webui`
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω React 18 + TypeScript + Vite
- ‚úÖ –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞

### –®–∞–≥ 3.3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é Vite

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é Vite
npm list vite
```

**–ï—Å–ª–∏ Vite 7.x:**
```bash
# –ü–æ–Ω–∏–∑–∏—Ç—å –¥–æ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ 5.x
npm install -D vite@^5.4.0
```

**–ï—Å–ª–∏ Vite 5.x –∏–ª–∏ 6.x:**
‚úÖ –í—Å–µ —Ö–æ—Ä–æ—à–æ, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º

### –®–∞–≥ 3.4: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Tailwind CSS (—Å–æ–≤–º–µ—Å—Ç–∏–º–∞—è –≤–µ—Ä—Å–∏—è)

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ò—Å–ø–æ–ª—å–∑—É–µ–º Tailwind CSS v3 (—Å—Ç–∞–±–∏–ª—å–Ω—ã–π), –Ω–µ v4 (beta –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –ø—Ä–æ–±–ª–µ–º—ã)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Tailwind CSS v3 —Å —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏
npm install -D tailwindcss@^3.4.1 postcss@^8.4.35 autoprefixer@^10.4.17

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å Tailwind
npx tailwindcss init -p
```

**–ß—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:**
- `tailwindcss@^3.4.1` - —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
- `postcss@^8.4.35` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ CSS
- `autoprefixer@^10.4.17` - –∞–≤—Ç–æ–ø—Ä–µ—Ñ–∏–∫—Å—ã

**–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å Vite 5.x, 6.x, 7.x
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å React 18.x
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è, –±–µ–∑ –ø—Ä–æ–±–ª–µ–º

### –®–∞–≥ 3.5: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å tailwind.config.js

**–û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª:** `tailwind.config.js`

**–ó–∞–º–µ–Ω–∏—Ç—å –í–°–Å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–∞:**

```javascript
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {
      colors: {
        primary: {
          DEFAULT: '#3b82f6',
          50: '#eff6ff',
          100: '#dbeafe',
          200: '#bfdbfe',
          300: '#93c5fd',
          400: '#60a5fa',
          500: '#3b82f6',
          600: '#2563eb',
          700: '#1d4ed8',
          800: '#1e40af',
          900: '#1e3a8a',
        },
      },
    },
  },
  plugins: [],
}
```

**–ß—Ç–æ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø—É—Ç–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞ –∫–ª–∞—Å—Å–æ–≤ Tailwind
- –î–æ–±–∞–≤–ª—è–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Ü–≤–µ—Ç–∞ (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `primary` –≤–º–µ—Å—Ç–æ `blue-600`)
- –†–∞—Å—à–∏—Ä—è–µ—Ç —Ç–µ–º—É Tailwind

### –®–∞–≥ 3.6: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CSS —Ñ–∞–π–ª

**–û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª:** `src/index.css`

**–ó–∞–º–µ–Ω–∏—Ç—å –í–°–Å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–∞:**

```css
@tailwind base;
@tailwind components;
@tailwind utilities;

/* –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç–∏–ª–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) */
@layer base {
  body {
    @apply bg-gray-50 text-gray-900;
  }
}
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** `src/main.tsx` –¥–æ–ª–∂–µ–Ω –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç —Ñ–∞–π–ª:

```typescript
import './index.css'
```

---

## 4. –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞

### –®–∞–≥ 4.1: –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫

```bash
# –ù–∞—Ö–æ–¥—è—Å—å –≤ –ø–∞–ø–∫–µ webui
mkdir -p src/components/ui
mkdir -p src/components/layout
mkdir -p src/components/manifest-editor
mkdir -p src/components/map
mkdir -p src/components/stops
mkdir -p src/pages
mkdir -p src/services
mkdir -p src/hooks
mkdir -p src/stores
mkdir -p src/types
mkdir -p src/utils
mkdir -p src/data
```

**–ò–ª–∏ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:**

```bash
mkdir -p src/{components/{ui,layout,manifest-editor,map,stops},pages,services,hooks,stores,types,utils,data}
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É:**

```bash
tree src -L 2  # –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω tree
# –∏–ª–∏
find src -type d | head -20
```

### –®–∞–≥ 4.2: –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–∑ TailAdmin

```bash
# –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –ø–∞–ø–∫—É —Å TailAdmin
cd ~/Downloads/tailadmin-react-free  # –∏–ª–∏ –≤–∞—à –ø—É—Ç—å

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
cp -r src/components/* ~/Projects/ValkyrieTMS-WebUI/webui/src/components/

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å layouts (–µ—Å–ª–∏ –µ—Å—Ç—å)
cp -r src/layouts/* ~/Projects/ValkyrieTMS-WebUI/webui/src/components/layout/

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å tailwind.config.js (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –Ω—É–∂–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ TailAdmin)
# cp tailwind.config.js ~/Projects/ValkyrieTMS-WebUI/webui/
```

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ï—Å–ª–∏ —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç, —Ä–µ—à–∏—Ç—å —á—Ç–æ –æ—Å—Ç–∞–≤–∏—Ç—å.

---

## 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Tailwind CSS

### –®–∞–≥ 5.1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Tailwind —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd ~/Projects/ValkyrieTMS-WebUI/webui

# –ó–∞–ø—É—Å—Ç–∏—Ç—å dev —Å–µ—Ä–≤–µ—Ä
npm run dev
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- –û—Ç–∫—Ä—ã—Ç—å http://localhost:5173
- –î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- –û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (Cmd + Option + I)
- –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ –ø—Ä–æ Tailwind

### –®–∞–≥ 5.2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
# –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–ª–∞—Å—Å–∞–º–∏
npm install clsx tailwind-merge

# –ò–∫–æ–Ω–∫–∏ (–µ—Å–ª–∏ –Ω–µ –≤ TailAdmin)
npm install lucide-react

# –†–æ—É—Ç–∏–Ω–≥
npm install react-router-dom@^6.22.0

# State management
npm install zustand@^4.4.7 @tanstack/react-query@^5.14.2

# HTTP –∫–ª–∏–µ–Ω—Ç
npm install axios@^1.6.7

# –§–æ—Ä–º—ã
npm install react-hook-form@^7.50.1 @hookform/resolvers@^3.3.4 zod@^3.22.4

# –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
npm install sonner@^1.4.3

# –†–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏
npm install date-fns@^3.3.1
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏–∏:**

```bash
npm list | grep -E "(react|vite|tailwind|zod|axios)"
```

---

## 6. –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ Layout

### –®–∞–≥ 6.1: –°–æ–∑–¥–∞—Ç—å —É—Ç–∏–ª–∏—Ç—É –¥–ª—è –∫–ª–∞—Å—Å–æ–≤

**–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª:** `src/utils/cn.ts`

```typescript
import { clsx, type ClassValue } from 'clsx';
import { twMerge } from 'tailwind-merge';

/**
 * –û–±—ä–µ–¥–∏–Ω—è–µ—Ç –∫–ª–∞—Å—Å—ã Tailwind CSS
 * –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: cn('px-4', 'py-2', className)
 */
export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}
```

### –®–∞–≥ 6.2: –°–æ–∑–¥–∞—Ç—å —Ç–∏–ø—ã

**–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª:** `src/types/index.ts`

```typescript
// –¢–∏–ø—ã –¥–ª—è —Å—Ç–æ–ø–æ–≤
export interface Stop {
  id: string;
  order: number;
  type: 'pickup' | 'delivery';
  address: string;
  location: {
    lat: number;
    lng: number;
  };
  timeWindow: {
    start: string;
    end: string;
  };
  status: 'planned' | 'dispatched' | 'en_route' | 'arrived' | 'completed';
  contact?: {
    name: string;
    phone: string;
    email?: string;
  };
  instructions?: string;
  shipments?: Shipment[];
}

// –¢–∏–ø—ã –¥–ª—è —à–∏–ø–º–µ–Ω—Ç–æ–≤
export interface Shipment {
  id: string;
  stop_id: string;
  order_number?: string;
  customer_name: string;
  weight: number; // –∫–≥
  volume: number; // –º¬≥
  pallets: number;
  requirements?: {
    liftgate?: boolean;
    temp_control?: boolean;
    appointment_required?: boolean;
  };
}

// –¢–∏–ø—ã –¥–ª—è –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞
export interface Manifest {
  id: string;
  number: string;
  stops: Stop[];
  status: 'draft' | 'dispatched' | 'in_transit' | 'delivered';
  driver_id?: string;
  truck_id?: string;
  trailer_id?: string;
  created_at: string;
  updated_at: string;
}

// –¢–∏–ø—ã –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∞
export interface Route {
  waypoints: Array<{ lat: number; lng: number; address: string }>;
  segments: Array<{
    from: { lat: number; lng: number };
    to: { lat: number; lng: number };
    distance: number; // –∫–º
    duration: number; // –º–∏–Ω—É—Ç—ã
    eta?: Date;
    hasLateRisk?: boolean;
  }>;
  totalDistance: number;
  totalTime: number;
  totalWeight: number;
}
```

### –®–∞–≥ 6.3: –°–æ–∑–¥–∞—Ç—å Layout –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

**–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª:** `src/components/layout/MainLayout.tsx`

```typescript
import { ReactNode } from 'react';
import { Link, useLocation } from 'react-router-dom';
import { 
  LayoutDashboard, 
  Truck, 
  Users, 
  Package, 
  Map, 
  FileText,
  Menu,
  X
} from 'lucide-react';
import { cn } from '../../utils/cn';
import { useState } from 'react';

interface MainLayoutProps {
  children: ReactNode;
}

const navigation = [
  { name: 'Dashboard', href: '/', icon: LayoutDashboard },
  { name: 'Trucks', href: '/trucks', icon: Truck },
  { name: 'Drivers', href: '/drivers', icon: Users },
  { name: 'Loads', href: '/loads', icon: Package },
  { name: 'Manifest Editor', href: '/editor', icon: Map },
  { name: 'Reports', href: '/reports', icon: FileText },
];

export const MainLayout = ({ children }: MainLayoutProps) => {
  const location = useLocation();
  const [sidebarOpen, setSidebarOpen] = useState(false);

  return (
    <div className="min-h-screen bg-gray-50">
      {/* Header */}
      <header className="bg-white shadow-sm border-b sticky top-0 z-50">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex justify-between items-center h-16">
            <div className="flex items-center">
              <button
                onClick={() => setSidebarOpen(!sidebarOpen)}
                className="lg:hidden p-2 rounded-md text-gray-600 hover:bg-gray-100"
              >
                {sidebarOpen ? <X className="w-6 h-6" /> : <Menu className="w-6 h-6" />}
              </button>
              <h1 className="ml-2 lg:ml-0 text-xl font-bold text-gray-900">
                Valkyrie TMS
              </h1>
            </div>
            
            <div className="flex items-center gap-4">
              <span className="text-sm text-gray-600">Admin</span>
              <button className="px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg">
                –í—ã—Ö–æ–¥
              </button>
            </div>
          </div>
        </div>
      </header>

      <div className="flex">
        {/* Sidebar */}
        <aside
          className={cn(
            'fixed lg:static inset-y-0 left-0 z-40 w-64 bg-white border-r transform transition-transform duration-300 ease-in-out lg:translate-x-0',
            sidebarOpen ? 'translate-x-0' : '-translate-x-full'
          )}
        >
          <nav className="p-4">
            <ul className="space-y-2">
              {navigation.map((item) => {
                const Icon = item.icon;
                const isActive = location.pathname === item.href;
                
                return (
                  <li key={item.name}>
                    <Link
                      to={item.href}
                      onClick={() => setSidebarOpen(false)}
                      className={cn(
                        'flex items-center gap-3 px-4 py-2 rounded-lg transition-colors',
                        isActive
                          ? 'bg-blue-50 text-blue-700 font-medium'
                          : 'text-gray-700 hover:bg-gray-50'
                      )}
                    >
                      <Icon className="w-5 h-5" />
                      <span>{item.name}</span>
                    </Link>
                  </li>
                );
              })}
            </ul>
          </nav>
        </aside>

        {/* Overlay –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –º–µ–Ω—é */}
        {sidebarOpen && (
          <div
            className="fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden"
            onClick={() => setSidebarOpen(false)}
          />
        )}

        {/* Main content */}
        <main className="flex-1 overflow-x-hidden">
          {children}
        </main>
      </div>
    </div>
  );
};
```

### –®–∞–≥ 6.4: –°–æ–∑–¥–∞—Ç—å –º–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

**–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª:** `src/data/mockData.ts`

```typescript
import { Stop, Manifest } from '../types';

export const mockStops: Stop[] = [
  {
    id: '1',
    order: 1,
    type: 'pickup',
    address: '–ú–æ—Å–∫–≤–∞, —É–ª. –õ–µ–Ω–∏–Ω–∞, 1',
    location: { lat: 55.7558, lng: 37.6173 },
    timeWindow: {
      start: '2024-01-15T08:00:00',
      end: '2024-01-15T10:00:00',
    },
    status: 'planned',
    contact: {
      name: '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤',
      phone: '+7 (999) 123-45-67',
    },
    instructions: '–ó–∞–±—Ä–∞—Ç—å –≥—Ä—É–∑ —Å–æ —Å–∫–ª–∞–¥–∞ ‚Ññ2',
  },
  {
    id: '2',
    order: 2,
    type: 'delivery',
    address: '–ú–æ—Å–∫–≤–∞, —É–ª. –ü—É—à–∫–∏–Ω–∞, 10',
    location: { lat: 55.7520, lng: 37.6156 },
    timeWindow: {
      start: '2024-01-15T12:00:00',
      end: '2024-01-15T14:00:00',
    },
    status: 'planned',
    contact: {
      name: '–ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤',
      phone: '+7 (999) 765-43-21',
    },
  },
  {
    id: '3',
    order: 3,
    type: 'delivery',
    address: '–ú–æ—Å–∫–≤–∞, —É–ª. –ì–∞–≥–∞—Ä–∏–Ω–∞, 5',
    location: { lat: 55.7580, lng: 37.6200 },
    timeWindow: {
      start: '2024-01-15T15:00:00',
      end: '2024-01-15T17:00:00',
    },
    status: 'planned',
  },
];

export const mockManifest: Manifest = {
  id: '1',
  number: 'MAN-2024-001',
  stops: mockStops,
  status: 'draft',
  created_at: '2024-01-15T07:00:00',
  updated_at: '2024-01-15T07:00:00',
};
```

---

## 7. –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü

### –®–∞–≥ 7.1: –°—Ç—Ä–∞–Ω–∏—Ü–∞ Dashboard

**–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª:** `src/pages/Dashboard.tsx`

```typescript
import { Card } from '../components/ui/Card'; // –ò–∑ TailAdmin
import { MainLayout } from '../components/layout/MainLayout';

export const Dashboard = () => {
  return (
    <MainLayout>
      <div className="p-6 lg:p-8">
        <h1 className="text-3xl font-bold mb-6">Dashboard</h1>
        
        <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
          <Card>
            <h3 className="text-lg font-semibold mb-2 text-gray-700">–ì—Ä—É–∑–æ–≤–∏–∫–∏</h3>
            <p className="text-3xl font-bold text-blue-600">50</p>
            <p className="text-sm text-gray-600 mt-2">–ê–∫—Ç–∏–≤–Ω—ã—Ö: 45</p>
          </Card>
          
          <Card>
            <h3 className="text-lg font-semibold mb-2 text-gray-700">–í–æ–¥–∏—Ç–µ–ª–∏</h3>
            <p className="text-3xl font-bold text-green-600">48</p>
            <p className="text-sm text-gray-600 mt-2">–ù–∞ –º–∞—Ä—à—Ä—É—Ç–µ: 30</p>
          </Card>
          
          <Card>
            <h3 className="text-lg font-semibold mb-2 text-gray-700">–ê–∫—Ç–∏–≤–Ω—ã–µ —Ä–µ–π—Å—ã</h3>
            <p className="text-3xl font-bold text-purple-600">25</p>
            <p className="text-sm text-gray-600 mt-2">–¢—Ä–µ–±—É—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è: 3</p>
          </Card>
        </div>
      </div>
    </MainLayout>
  );
};
```

### –®–∞–≥ 7.2: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–æ—É—Ç–∏–Ω–≥

**–û–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª:** `src/App.tsx`

```typescript
import { BrowserRouter, Routes, Route } from 'react-router-dom';
import { Dashboard } from './pages/Dashboard';
import { ManifestEditor } from './pages/ManifestEditor';
import { Toaster } from 'sonner';
import './App.css';

function App() {
  return (
    <>
      <BrowserRouter>
        <Routes>
          <Route path="/" element={<Dashboard />} />
          <Route path="/editor" element={<ManifestEditor />} />
          <Route path="/trucks" element={<div>–¢rucks page</div>} />
          <Route path="/drivers" element={<div>Drivers page</div>} />
          <Route path="/loads" element={<div>Loads page</div>} />
          <Route path="/reports" element={<div>Reports page</div>} />
        </Routes>
      </BrowserRouter>
      <Toaster position="top-right" />
    </>
  );
}

export default App;
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** `npm run dev` - –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—è

---

## 8. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç—ã (Leaflet)

### –®–∞–≥ 8.1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Leaflet

```bash
npm install leaflet@^1.9.4 react-leaflet@^4.2.1
npm install -D @types/leaflet@^1.9.8
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**
- ‚úÖ Leaflet 1.9.4 —Ä–∞–±–æ—Ç–∞–µ—Ç —Å React 18
- ‚úÖ react-leaflet 4.2.1 —Å–æ–≤–º–µ—Å—Ç–∏–º

### –®–∞–≥ 8.2: –î–æ–±–∞–≤–∏—Ç—å CSS Leaflet

**–û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª:** `src/main.tsx`

**–î–æ–±–∞–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç:**
```typescript
import 'leaflet/dist/leaflet.css';
```

**–ü–æ–ª–Ω—ã–π —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:**
```typescript
import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App.tsx'
import './index.css'
import 'leaflet/dist/leaflet.css'

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
)
```

### –®–∞–≥ 8.3: –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç—ã

**–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª:** `src/components/map/MapView.tsx`

```typescript
import { useEffect, useRef } from 'react';
import { MapContainer, TileLayer, Marker, Popup, useMap } from 'react-leaflet';
import L from 'leaflet';
import { Stop } from '../../types';

// –§–∏–∫—Å –¥–ª—è –∏–∫–æ–Ω–æ–∫ –º–∞—Ä–∫–µ—Ä–æ–≤ (–ø—Ä–æ–±–ª–µ–º–∞ —Å –ø—É—Ç—è–º–∏ –≤ Vite)
delete (L.Icon.Default.prototype as any)._getIconUrl;
L.Icon.Default.mergeOptions({
  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png',
  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png',
  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',
});

interface MapViewProps {
  stops: Stop[];
  selectedStopId?: string;
  onStopSelect?: (stopId: string) => void;
}

// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞—Ä—Ç—ã
const MapCenter = ({ center }: { center: [number, number] }) => {
  const map = useMap();
  useEffect(() => {
    map.setView(center, map.getZoom());
  }, [center, map]);
  return null;
};

export const MapView = ({ stops, selectedStopId, onStopSelect }: MapViewProps) => {
  const mapRef = useRef<L.Map>(null);
  const defaultCenter: [number, number] = [55.7558, 37.6173]; // –ú–æ—Å–∫–≤–∞

  // –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —Å—Ç–æ–ø–µ
  useEffect(() => {
    if (selectedStopId) {
      const stop = stops.find(s => s.id === selectedStopId);
      if (stop?.location) {
        mapRef.current?.setView([stop.location.lat, stop.location.lng], 13);
      }
    }
  }, [selectedStopId, stops]);

  // –í—ã—á–∏—Å–ª–∏—Ç—å —Ü–µ–Ω—Ç—Ä –¥–ª—è –≤—Å–µ—Ö —Å—Ç–æ–ø–æ–≤
  const getCenter = (): [number, number] => {
    if (stops.length === 0) return defaultCenter;
    
    const lats = stops.map(s => s.location?.lat).filter(Boolean) as number[];
    const lngs = stops.map(s => s.location?.lng).filter(Boolean) as number[];
    
    if (lats.length === 0) return defaultCenter;
    
    return [
      (Math.min(...lats) + Math.max(...lats)) / 2,
      (Math.min(...lngs) + Math.max(...lngs)) / 2,
    ];
  };

  return (
    <div className="w-full h-full rounded-lg overflow-hidden border">
      <MapContainer
        center={getCenter()}
        zoom={10}
        style={{ height: '100%', width: '100%' }}
        ref={mapRef}
      >
        <TileLayer
          url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
          attribution='&copy; OpenStreetMap contributors'
        />
        
        {/* –ú–∞—Ä–∫–µ—Ä—ã —Å—Ç–æ–ø–æ–≤ */}
        {stops.map((stop) => {
          if (!stop.location) return null;
          
          const isSelected = stop.id === selectedStopId;
          
          return (
            <Marker
              key={stop.id}
              position={[stop.location.lat, stop.location.lng]}
              eventHandlers={{
                click: () => onStopSelect?.(stop.id),
              }}
            >
              <Popup>
                <div>
                  <p className="font-semibold">–°—Ç–æ–ø #{stop.order}</p>
                  <p className="text-sm">{stop.address}</p>
                  <p className="text-xs text-gray-600 mt-1">
                    {stop.type === 'pickup' ? '–ü–æ–≥—Ä—É–∑–∫–∞' : '–†–∞–∑–≥—Ä—É–∑–∫–∞'}
                  </p>
                </div>
              </Popup>
            </Marker>
          );
        })}
      </MapContainer>
    </div>
  );
};
```

---

## 9. –†–µ–¥–∞–∫—Ç–æ—Ä –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ (—Ç—Ä–µ—Ö–ø–∞–Ω–µ–ª—å–Ω—ã–π layout)

### –®–∞–≥ 9.1: –°–æ–∑–¥–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É —Å—Ç–æ–ø–∞

**–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª:** `src/components/stops/StopCard.tsx`

```typescript
import { Stop } from '../../types';
import { Card } from '../ui/Card';
import { cn } from '../../utils/cn';
import { MapPin, Clock, Phone, Truck, Package } from 'lucide-react';

interface StopCardProps {
  stop: Stop;
  isSelected?: boolean;
  onClick?: () => void;
}

export const StopCard = ({ stop, isSelected, onClick }: StopCardProps) => {
  const getStatusColor = (status: Stop['status']) => {
    switch (status) {
      case 'completed':
        return 'bg-green-100 text-green-800';
      case 'en_route':
        return 'bg-blue-100 text-blue-800';
      case 'arrived':
        return 'bg-yellow-100 text-yellow-800';
      default:
        return 'bg-gray-100 text-gray-800';
    }
  };

  return (
    <Card
      className={cn(
        'cursor-pointer hover:shadow-lg transition-all mb-3',
        isSelected && 'ring-2 ring-blue-500 border-blue-500'
      )}
      onClick={onClick}
    >
      <div className="flex items-start justify-between mb-3">
        <div className="flex items-center gap-2">
          <span className="font-bold text-lg text-gray-900">#{stop.order}</span>
          <span className={cn(
            'px-2 py-0.5 rounded text-xs font-medium',
            stop.type === 'pickup' 
              ? 'bg-blue-100 text-blue-800' 
              : 'bg-green-100 text-green-800'
          )}>
            {stop.type === 'pickup' ? '–ü–æ–≥—Ä—É–∑–∫–∞' : '–†–∞–∑–≥—Ä—É–∑–∫–∞'}
          </span>
        </div>
        <span className={cn('px-2 py-0.5 rounded text-xs font-medium', getStatusColor(stop.status))}>
          {stop.status}
        </span>
      </div>
      
      <div className="space-y-2">
        <div className="flex items-start gap-2 text-sm text-gray-600">
          <MapPin className="w-4 h-4 mt-0.5 flex-shrink-0" />
          <span className="flex-1">{stop.address}</span>
        </div>
        
        <div className="flex items-center gap-2 text-sm text-gray-600">
          <Clock className="w-4 h-4" />
          <span>
            {new Date(stop.timeWindow.start).toLocaleTimeString('ru-RU', { 
              hour: '2-digit', 
              minute: '2-digit' 
            })} - {new Date(stop.timeWindow.end).toLocaleTimeString('ru-RU', { 
              hour: '2-digit', 
              minute: '2-digit' 
            })}
          </span>
        </div>
        
        {stop.contact && (
          <div className="flex items-center gap-2 text-sm text-gray-600">
            <Phone className="w-4 h-4" />
            <span>{stop.contact.phone}</span>
          </div>
        )}
        
        {stop.instructions && (
          <div className="text-sm text-gray-500 italic border-t pt-2 mt-2">
            {stop.instructions}
          </div>
        )}
      </div>
    </Card>
  );
};
```

### –®–∞–≥ 9.2: –°–æ–∑–¥–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Å—Ç–æ–ø–æ–≤

**–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª:** `src/components/stops/StopList.tsx`

```typescript
import { Stop } from '../../types';
import { StopCard } from './StopCard';

interface StopListProps {
  stops: Stop[];
  selectedStopId?: string;
  onStopSelect?: (stopId: string) => void;
}

export const StopList = ({ stops, selectedStopId, onStopSelect }: StopListProps) => {
  return (
    <div className="h-full flex flex-col">
      <div className="p-4 border-b bg-white">
        <h2 className="text-xl font-semibold text-gray-900">
          –°–ø–∏—Å–æ–∫ —Å—Ç–æ–ø–æ–≤
        </h2>
        <p className="text-sm text-gray-600 mt-1">
          –í—Å–µ–≥–æ: {stops.length}
        </p>
      </div>
      
      <div className="flex-1 overflow-y-auto p-4 space-y-2">
        {stops.length === 0 ? (
          <div className="text-center text-gray-500 py-8">
            –ù–µ—Ç —Å—Ç–æ–ø–æ–≤
          </div>
        ) : (
          stops.map((stop) => (
            <StopCard
              key={stop.id}
              stop={stop}
              isSelected={stop.id === selectedStopId}
              onClick={() => onStopSelect?.(stop.id)}
            />
          ))
        )}
      </div>
    </div>
  );
};
```

### –®–∞–≥ 9.3: –°–æ–∑–¥–∞—Ç—å –ø—Ä–∞–≤—É—é –ø–∞–Ω–µ–ª—å (–¥–µ—Ç–∞–ª–∏)

**–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª:** `src/components/manifest-editor/RightPanel.tsx`

```typescript
import { Stop } from '../../types';
import { Card } from '../ui/Card';
import { MapPin, Clock, Phone, Mail, FileText } from 'lucide-react';

interface RightPanelProps {
  selectedStop: Stop | null;
}

export const RightPanel = ({ selectedStop }: RightPanelProps) => {
  if (!selectedStop) {
    return (
      <div className="h-full flex items-center justify-center p-8">
        <div className="text-center text-gray-500">
          <p className="text-lg mb-2">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–æ–ø</p>
          <p className="text-sm">–¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª–µ–π</p>
        </div>
      </div>
    );
  }

  return (
    <div className="h-full overflow-y-auto p-4">
      <div className="mb-4">
        <h2 className="text-xl font-semibold text-gray-900 mb-2">
          –î–µ—Ç–∞–ª–∏ —Å—Ç–æ–ø–∞ #{selectedStop.order}
        </h2>
        <span className={`px-2 py-1 rounded text-xs font-medium ${
          selectedStop.type === 'pickup' 
            ? 'bg-blue-100 text-blue-800' 
            : 'bg-green-100 text-green-800'
        }`}>
          {selectedStop.type === 'pickup' ? '–ü–æ–≥—Ä—É–∑–∫–∞' : '–†–∞–∑–≥—Ä—É–∑–∫–∞'}
        </span>
      </div>

      <Card className="mb-4">
        <h3 className="font-semibold mb-3 flex items-center gap-2">
          <MapPin className="w-4 h-4" />
          –ê–¥—Ä–µ—Å
        </h3>
        <p className="text-gray-700">{selectedStop.address}</p>
        {selectedStop.location && (
          <p className="text-sm text-gray-500 mt-1">
            –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: {selectedStop.location.lat.toFixed(6)}, {selectedStop.location.lng.toFixed(6)}
          </p>
        )}
      </Card>

      <Card className="mb-4">
        <h3 className="font-semibold mb-3 flex items-center gap-2">
          <Clock className="w-4 h-4" />
          –û–∫–Ω–æ –≤—Ä–µ–º–µ–Ω–∏
        </h3>
        <div className="space-y-1">
          <p className="text-sm text-gray-600">
            –ù–∞—á–∞–ª–æ: {new Date(selectedStop.timeWindow.start).toLocaleString('ru-RU')}
          </p>
          <p className="text-sm text-gray-600">
            –ö–æ–Ω–µ—Ü: {new Date(selectedStop.timeWindow.end).toLocaleString('ru-RU')}
          </p>
        </div>
      </Card>

      {selectedStop.contact && (
        <Card className="mb-4">
          <h3 className="font-semibold mb-3 flex items-center gap-2">
            <Phone className="w-4 h-4" />
            –ö–æ–Ω—Ç–∞–∫—Ç
          </h3>
          <div className="space-y-2">
            <p className="text-sm text-gray-700">{selectedStop.contact.name}</p>
            <p className="text-sm text-gray-600">{selectedStop.contact.phone}</p>
            {selectedStop.contact.email && (
              <p className="text-sm text-gray-600 flex items-center gap-2">
                <Mail className="w-4 h-4" />
                {selectedStop.contact.email}
              </p>
            )}
          </div>
        </Card>
      )}

      {selectedStop.instructions && (
        <Card>
          <h3 className="font-semibold mb-3 flex items-center gap-2">
            <FileText className="w-4 h-4" />
            –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
          </h3>
          <p className="text-sm text-gray-700">{selectedStop.instructions}</p>
        </Card>
      )}
    </div>
  );
};
```

### –®–∞–≥ 9.4: –°–æ–∑–¥–∞—Ç—å –≤–µ—Ä—Ö–Ω—é—é –ø–∞–Ω–µ–ª—å –º–µ—Ç—Ä–∏–∫

**–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª:** `src/components/manifest-editor/TopBar.tsx`

```typescript
import { Button } from '../ui/Button';
import { FileText, Send, UserPlus, Download } from 'lucide-react';
import { Manifest, Route } from '../../types';

interface TopBarProps {
  manifest: Manifest;
  route: Route | null;
  onAssign: () => void;
  onNotify: () => void;
  onExport: () => void;
}

export const TopBar = ({ manifest, route, onAssign, onNotify, onExport }: TopBarProps) => {
  return (
    <div className="h-16 border-b bg-white px-6 flex items-center justify-between sticky top-0 z-10">
      {/* –ú–µ—Ç—Ä–∏–∫–∏ */}
      <div className="flex items-center gap-6">
        <div className="flex items-center gap-2">
          <span className="text-sm text-gray-600">–°—Ç–æ–ø—ã:</span>
          <span className="font-semibold text-gray-900">{manifest.stops.length}</span>
        </div>
        
        {route && (
          <>
            <div className="flex items-center gap-2">
              <span className="text-sm text-gray-600">–ü—Ä–æ–±–µ–≥:</span>
              <span className="font-semibold text-gray-900">{route.totalDistance.toFixed(1)} –∫–º</span>
            </div>
            
            <div className="flex items-center gap-2">
              <span className="text-sm text-gray-600">–í—Ä–µ–º—è:</span>
              <span className="font-semibold text-gray-900">{Math.round(route.totalTime)} –º–∏–Ω</span>
            </div>
            
            <div className="flex items-center gap-2">
              <span className="text-sm text-gray-600">–í–µ—Å:</span>
              <span className="font-semibold text-gray-900">{route.totalWeight} –∫–≥</span>
            </div>
          </>
        )}
      </div>

      {/* –î–µ–π—Å—Ç–≤–∏—è */}
      <div className="flex items-center gap-2">
        <Button variant="outline" size="sm" onClick={onAssign}>
          <UserPlus className="w-4 h-4 mr-2" />
          –ù–∞–∑–Ω–∞—á–∏—Ç—å –≤–æ–¥–∏—Ç–µ–ª—è
        </Button>
        
        <Button variant="outline" size="sm" onClick={onNotify}>
          <Send className="w-4 h-4 mr-2" />
          –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        </Button>
        
        <Button variant="outline" size="sm" onClick={onExport}>
          <Download className="w-4 h-4 mr-2" />
          –≠–∫—Å–ø–æ—Ä—Ç
        </Button>
      </div>
    </div>
  );
};
```

### –®–∞–≥ 9.5: –°–æ–∑–¥–∞—Ç—å –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞

**–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª:** `src/pages/ManifestEditor.tsx`

```typescript
import { useState } from 'react';
import { MainLayout } from '../components/layout/MainLayout';
import { TopBar } from '../components/manifest-editor/TopBar';
import { StopList } from '../components/stops/StopList';
import { MapView } from '../components/map/MapView';
import { RightPanel } from '../components/manifest-editor/RightPanel';
import { mockManifest, mockStops } from '../data/mockData';
import { Stop } from '../types';
import { toast } from 'sonner';

export const ManifestEditor = () => {
  const [stops] = useState<Stop[]>(mockStops);
  const [selectedStopId, setSelectedStopId] = useState<string | undefined>();
  const [route, setRoute] = useState<any>(null);

  const selectedStop = stops.find(s => s.id === selectedStopId) || null;

  const handleAssign = () => {
    toast.info('–§—É–Ω–∫—Ü–∏—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ');
  };

  const handleNotify = () => {
    toast.info('–§—É–Ω–∫—Ü–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ');
  };

  const handleExport = () => {
    toast.info('–§—É–Ω–∫—Ü–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ');
  };

  return (
    <MainLayout>
      <div className="h-screen flex flex-col bg-gray-50">
        {/* –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å –º–µ—Ç—Ä–∏–∫ */}
        <TopBar
          manifest={mockManifest}
          route={route}
          onAssign={handleAssign}
          onNotify={handleNotify}
          onExport={handleExport}
        />

        {/* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç - —Ç—Ä–µ—Ö–ø–∞–Ω–µ–ª—å–Ω—ã–π layout */}
        <div className="flex-1 flex overflow-hidden">
          {/* –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å - —Å–ø–∏—Å–æ–∫ —Å—Ç–æ–ø–æ–≤ */}
          <div className="w-96 bg-white border-r flex flex-col">
            <StopList
              stops={stops}
              selectedStopId={selectedStopId}
              onStopSelect={setSelectedStopId}
            />
          </div>

          {/* –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å - –∫–∞—Ä—Ç–∞ */}
          <div className="flex-1 relative p-4">
            <div className="h-full">
              <MapView
                stops={stops}
                selectedStopId={selectedStopId}
                onStopSelect={setSelectedStopId}
              />
            </div>
          </div>

          {/* –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å - –¥–µ—Ç–∞–ª–∏ */}
          <div className="w-96 bg-white border-l flex flex-col">
            <RightPanel selectedStop={selectedStop} />
          </div>
        </div>
      </div>
    </MainLayout>
  );
};
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** `npm run dev` ‚Üí –æ—Ç–∫—Ä—ã—Ç—å http://localhost:5173/editor

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
- ‚úÖ –¢—Ä–µ—Ö–ø–∞–Ω–µ–ª—å–Ω—ã–π layout
- ‚úÖ –°–ø–∏—Å–æ–∫ —Å—Ç–æ–ø–æ–≤ —Å–ª–µ–≤–∞
- ‚úÖ –ö–∞—Ä—Ç–∞ –ø–æ —Ü–µ–Ω—Ç—Ä—É —Å –º–∞—Ä–∫–µ—Ä–∞–º–∏
- ‚úÖ –î–µ—Ç–∞–ª–∏ —Å–ø—Ä–∞–≤–∞ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Å—Ç–æ–ø–∞

---

## 10. Drag & Drop –¥–ª—è —Å—Ç–æ–ø–æ–≤

### –®–∞–≥ 10.1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å @dnd-kit

```bash
npm install @dnd-kit/core@^6.1.0 @dnd-kit/sortable@^8.0.0 @dnd-kit/utilities@^3.2.2
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**
- ‚úÖ @dnd-kit —Ä–∞–±–æ—Ç–∞–µ—Ç —Å React 18
- ‚úÖ –í–µ—Ä—Å–∏–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã

### –®–∞–≥ 10.2: –û–±–Ω–æ–≤–∏—Ç—å StopList —Å Drag & Drop

**–û–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª:** `src/components/stops/StopList.tsx`

```typescript
import {
  DndContext,
  closestCenter,
  KeyboardSensor,
  PointerSensor,
  useSensor,
  useSensors,
  DragEndEvent,
} from '@dnd-kit/core';
import {
  arrayMove,
  SortableContext,
  sortableKeyboardCoordinates,
  verticalListSortingStrategy,
  useSortable,
} from '@dnd-kit/sortable';
import { CSS } from '@dnd-kit/utilities';
import { Stop } from '../../types';
import { StopCard } from './StopCard';
import { toast } from 'sonner';

interface StopListProps {
  stops: Stop[];
  selectedStopId?: string;
  onStopSelect?: (stopId: string) => void;
  onOrderChange?: (oldIndex: number, newIndex: number) => void;
}

export const StopList = ({ 
  stops, 
  selectedStopId, 
  onStopSelect,
  onOrderChange 
}: StopListProps) => {
  const sensors = useSensors(
    useSensor(PointerSensor),
    useSensor(KeyboardSensor, {
      coordinateGetter: sortableKeyboardCoordinates,
    })
  );

  const handleDragEnd = (event: DragEndEvent) => {
    const { active, over } = event;

    if (over && active.id !== over.id) {
      const oldIndex = stops.findIndex(s => s.id === active.id);
      const newIndex = stops.findIndex(s => s.id === over.id);

      if (oldIndex !== -1 && newIndex !== -1) {
        onOrderChange?.(oldIndex, newIndex);
        
        toast.success('–ü–æ—Ä—è–¥–æ–∫ —Å—Ç–æ–ø–æ–≤ –∏–∑–º–µ–Ω–µ–Ω', {
          action: {
            label: '–û—Ç–º–µ–Ω–∏—Ç—å',
            onClick: () => onOrderChange?.(newIndex, oldIndex),
          },
        });
      }
    }
  };

  return (
    <div className="h-full flex flex-col">
      <div className="p-4 border-b bg-white">
        <h2 className="text-xl font-semibold text-gray-900">
          –°–ø–∏—Å–æ–∫ —Å—Ç–æ–ø–æ–≤
        </h2>
        <p className="text-sm text-gray-600 mt-1">
          –í—Å–µ–≥–æ: {stops.length}
        </p>
      </div>
      
      <DndContext
        sensors={sensors}
        collisionDetection={closestCenter}
        onDragEnd={handleDragEnd}
      >
        <SortableContext
          items={stops.map(s => s.id)}
          strategy={verticalListSortingStrategy}
        >
          <div className="flex-1 overflow-y-auto p-4 space-y-2">
            {stops.length === 0 ? (
              <div className="text-center text-gray-500 py-8">
                –ù–µ—Ç —Å—Ç–æ–ø–æ–≤
              </div>
            ) : (
              stops.map((stop, index) => (
                <SortableStopCard
                  key={stop.id}
                  stop={stop}
                  index={index}
                  isSelected={stop.id === selectedStopId}
                  onSelect={() => onStopSelect?.(stop.id)}
                />
              ))
            )}
          </div>
        </SortableContext>
      </DndContext>
    </div>
  );
};

// –°–æ—Ä—Ç–∏—Ä—É–µ–º–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞
const SortableStopCard = ({
  stop,
  index,
  isSelected,
  onSelect,
}: {
  stop: Stop;
  index: number;
  isSelected: boolean;
  onSelect: () => void;
}) => {
  const {
    attributes,
    listeners,
    setNodeRef,
    transform,
    transition,
    isDragging,
  } = useSortable({ id: stop.id });

  const style = {
    transform: CSS.Transform.toString(transform),
    transition,
    opacity: isDragging ? 0.5 : 1,
  };

  return (
    <div ref={setNodeRef} style={style} {...attributes} {...listeners}>
      <StopCard
        stop={stop}
        isSelected={isSelected}
        onClick={onSelect}
      />
    </div>
  );
};
```

### –®–∞–≥ 10.3: –û–±–Ω–æ–≤–∏—Ç—å ManifestEditor –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞

**–û–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª:** `src/pages/ManifestEditor.tsx`

```typescript
// –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞
const handleOrderChange = (oldIndex: number, newIndex: number) => {
  const newStops = [...stops];
  const [removed] = newStops.splice(oldIndex, 1);
  newStops.splice(newIndex, 0, removed);
  
  // –û–±–Ω–æ–≤–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ –≤ —Å—Ç–æ–ø–∞—Ö
  const updatedStops = newStops.map((stop, index) => ({
    ...stop,
    order: index + 1,
  }));
  
  // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ store –∏–ª–∏ API
  // setStops(updatedStops);
  
  // –ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞
  // calculateRoute(updatedStops);
};

// –û–±–Ω–æ–≤–∏—Ç—å StopList
<StopList
  stops={stops}
  selectedStopId={selectedStopId}
  onStopSelect={setSelectedStopId}
  onOrderChange={handleOrderChange}
/>
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –ú–æ–∂–Ω–æ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞—Ç—å —Å—Ç–æ–ø—ã –≤ —Å–ø–∏—Å–∫–µ!

---

## 11. –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∏ ETA

### –®–∞–≥ 11.1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏

```bash
# –î–ª—è —Ä–∞—Å—á–µ—Ç–æ–≤ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π
npm install turf@^3.0.14

# –î–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞—Ç–∞–º–∏
npm install date-fns@^3.3.1
```

### –®–∞–≥ 11.2: –°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å —Ä–∞—Å—á–µ—Ç–∞ –º–∞—Ä—à—Ä—É—Ç–∞

**–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª:** `src/services/routeService.ts`

```typescript
import { Stop, Route } from '../types';
import * as turf from '@turf/turf';

export const calculateRoute = (stops: Stop[]): Route => {
  if (stops.length < 2) {
    return {
      waypoints: [],
      segments: [],
      totalDistance: 0,
      totalTime: 0,
      totalWeight: 0,
    };
  }

  const waypoints = stops
    .filter(s => s.location)
    .map(s => ({
      lat: s.location!.lat,
      lng: s.location!.lng,
      address: s.address,
    }));

  const segments: Route['segments'] = [];
  let totalDistance = 0;
  let totalTime = 0;

  // –†–∞—Å—á–µ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π –º–µ–∂–¥—É —Å–æ—Å–µ–¥–Ω–∏–º–∏ —Ç–æ—á–∫–∞–º–∏
  for (let i = 0; i < waypoints.length - 1; i++) {
    const from = waypoints[i];
    const to = waypoints[i + 1];

    // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Turf.js –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è
    const fromPoint = turf.point([from.lng, from.lat]);
    const toPoint = turf.point([to.lng, to.lat]);
    
    const distance = turf.distance(fromPoint, toPoint, { units: 'kilometers' });
    const duration = (distance / 60) * 60; // –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º —Å—Ä–µ–¥–Ω—é—é —Å–∫–æ—Ä–æ—Å—Ç—å 60 –∫–º/—á
    
    totalDistance += distance;
    totalTime += duration;

    segments.push({
      from: { lat: from.lat, lng: from.lng },
      to: { lat: to.lat, lng: to.lng },
      distance,
      duration,
    });
  }

  // –†–∞—Å—á–µ—Ç –æ–±—â–µ–≥–æ –≤–µ—Å–∞
  const totalWeight = stops.reduce((sum, stop) => {
    return sum + (stop.shipments?.reduce((w, s) => w + s.weight, 0) || 0);
  }, 0);

  return {
    waypoints,
    segments,
    totalDistance,
    totalTime,
    totalWeight,
  };
};
```

**–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Turf.js:**
```bash
npm install @turf/turf@^6.5.0
```

### –®–∞–≥ 11.3: –û–±–Ω–æ–≤–∏—Ç—å ManifestEditor –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –º–∞—Ä—à—Ä—É—Ç–∞

**–û–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª:** `src/pages/ManifestEditor.tsx`

```typescript
import { useState, useEffect } from 'react';
import { calculateRoute } from '../services/routeService';
// ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã

export const ManifestEditor = () => {
  const [stops] = useState<Stop[]>(mockStops);
  const [selectedStopId, setSelectedStopId] = useState<string | undefined>();
  const [route, setRoute] = useState<Route | null>(null);

  // –†–∞—Å—á–µ—Ç –º–∞—Ä—à—Ä—É—Ç–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–æ–ø–æ–≤
  useEffect(() => {
    if (stops.length >= 2) {
      const calculatedRoute = calculateRoute(stops);
      setRoute(calculatedRoute);
    }
  }, [stops]);

  // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥
};
```

---

## 12. Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –®–∞–≥ 12.1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Socket.IO

```bash
npm install socket.io-client@^4.6.4
```

### –®–∞–≥ 12.2: –°–æ–∑–¥–∞—Ç—å —Ö—É–∫ –¥–ª—è WebSocket

**–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª:** `src/hooks/useSocket.ts`

```typescript
import { useEffect } from 'react';
import { io, Socket } from 'socket.io-client';

export const useSocket = (manifestId: string | null) => {
  useEffect(() => {
    if (!manifestId) return;

    const socket: Socket = io(process.env.VITE_WS_URL || 'http://localhost:3000', {
      auth: {
        token: localStorage.getItem('token'),
      },
    });

    socket.emit('subscribe:manifest', manifestId);

    socket.on('stop:status-changed', (data) => {
      console.log('–°—Ç–∞—Ç—É—Å —Å—Ç–æ–ø–∞ –∏–∑–º–µ–Ω–µ–Ω:', data);
      // –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å —á–µ—Ä–µ–∑ store
    });

    socket.on('driver:location-update', (data) => {
      console.log('–ü–æ–∑–∏—Ü–∏—è –≤–æ–¥–∏—Ç–µ–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞:', data);
      // –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é –Ω–∞ –∫–∞—Ä—Ç–µ
    });

    return () => {
      socket.emit('unsubscribe:manifest', manifestId);
      socket.disconnect();
    };
  }, [manifestId]);
};
```

---

## 13. –§–∏–Ω–∞–ª—å–Ω–∞—è –ø–æ–ª–∏—Ä–æ–≤–∫–∞

### –®–∞–≥ 13.1: –î–æ–±–∞–≤–∏—Ç—å Zustand store

```bash
npm install zustand@^4.4.7
```

**–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª:** `src/stores/manifestStore.ts`

```typescript
import { create } from 'zustand';
import { Manifest, Stop } from '../types';

interface ManifestState {
  manifest: Manifest | null;
  stops: Stop[];
  selectedStopId: string | null;
  
  setManifest: (manifest: Manifest) => void;
  setStops: (stops: Stop[]) => void;
  updateStopOrder: (oldIndex: number, newIndex: number) => void;
  setSelectedStop: (stopId: string | null) => void;
}

export const useManifestStore = create<ManifestState>()((set) => ({
  manifest: null,
  stops: [],
  selectedStopId: null,

  setManifest: (manifest) => set({ manifest }),
  setStops: (stops) => set({ stops }),
  
  updateStopOrder: (oldIndex, newIndex) => set((state) => {
    const newStops = [...state.stops];
    const [removed] = newStops.splice(oldIndex, 1);
    newStops.splice(newIndex, 0, removed);
    
    return {
      stops: newStops.map((stop, index) => ({
        ...stop,
        order: index + 1,
      })),
    };
  }),
  
  setSelectedStop: (stopId) => set({ selectedStopId: stopId }),
}));
```

### –®–∞–≥ 13.2: –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫

**–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª:** `src/components/ErrorBoundary.tsx`

```typescript
import { Component, ReactNode } from 'react';

interface Props {
  children: ReactNode;
}

interface State {
  hasError: boolean;
}

export class ErrorBoundary extends Component<Props, State> {
  constructor(props: Props) {
    super(props);
    this.state = { hasError: false };
  }

  static getDerivedStateFromError() {
    return { hasError: true };
  }

  render() {
    if (this.state.hasError) {
      return (
        <div className="min-h-screen flex items-center justify-center bg-gray-50">
          <div className="text-center">
            <h1 className="text-2xl font-bold text-gray-900 mb-2">
              –ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫
            </h1>
            <p className="text-gray-600 mb-4">
              –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            </p>
            <button
              onClick={() => window.location.reload()}
              className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
            >
              –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
            </button>
          </div>
        </div>
      );
    }

    return this.props.children;
  }
}
```

### –®–∞–≥ 13.3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª:** `package.json` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏:

```json
{
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview",
    "lint": "eslint . --ext ts,tsx"
  }
}
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É:**

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å dev —Å–µ—Ä–≤–µ—Ä
npm run dev

# –û—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä
# http://localhost:5173

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
# ‚úÖ –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
# ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
# ‚úÖ –†–µ–¥–∞–∫—Ç–æ—Ä –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
# ‚úÖ –ö–∞—Ä—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
# ‚úÖ –°—Ç–æ–ø—ã –º–æ–∂–Ω–æ –≤—ã–±–∏—Ä–∞—Ç—å
# ‚úÖ Drag & Drop —Ä–∞–±–æ—Ç–∞–µ—Ç
```

---

## ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç

- [ ] Node.js 20+ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] TailAdmin —Å–∫–∞—á–∞–Ω –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- [ ] –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [ ] Tailwind CSS –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Layout –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –°—Ç—Ä–∞–Ω–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã
- [ ] –ö–∞—Ä—Ç–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞
- [ ] –¢—Ä–µ—Ö–ø–∞–Ω–µ–ª—å–Ω—ã–π layout —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Drag & Drop —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- [ ] –ú–∞—Ä—à—Ä—É—Ç —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏
- [ ] Responsive –¥–∏–∑–∞–π–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π WebUI —Å:
- ‚úÖ –¢—Ä–µ—Ö–ø–∞–Ω–µ–ª—å–Ω—ã–º layout
- ‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –∫–∞—Ä—Ç–æ–π
- ‚úÖ Drag & Drop –¥–ª—è —Å—Ç–æ–ø–æ–≤
- ‚úÖ –†–∞—Å—á–µ—Ç–æ–º –º–∞—Ä—à—Ä—É—Ç–∞
- ‚úÖ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º –¥–∏–∑–∞–π–Ω–æ–º –∏–∑ TailAdmin

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫ backend API
2. –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤
4. –î–æ–±–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
5. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —ç–∫—Å–ø–æ—Ä—Ç PDF

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0  
**–î–∞—Ç–∞:** –î–µ–∫–∞–±—Ä—å 2024  
**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞:** Mac, Node.js 20.x, Vite 5.x, Tailwind CSS 3.4.x

